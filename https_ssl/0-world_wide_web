#!/usr/bin/env bash
# This script displays DNS A record information about domain subdomains

# Function to get and print subdomain info
get_subdomain_info() {
	    local domain=$1
	        local subdomain=$2

		    # Get the ANSWER SECTION line for the subdomain
		        local answer_section
			    answer_section=$(dig "${subdomain}.${domain}" | grep -A1 'ANSWER SECTION:' | tail -n1)

			        # Parse record type and destination IP with awk
				    local record_type destination
				        record_type=$(echo "$answer_section" | awk '{print $4}')
					    destination=$(echo "$answer_section" | awk '{print $5}')

					        echo "The subdomain ${subdomain} is a ${record_type} record and points to ${destination}"
					}

				# Main script logic
			domain=$1
			subdomain=$2

			if [ -z "$subdomain" ]; then
				    for sub in www lb-01 web-01 web-02; do
					            get_subdomain_info "$domain" "$sub"
						        done
						else
							    get_subdomain_info "$domain" "$subdomain"
			fi
