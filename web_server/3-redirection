#!/usr/bin/env bash
# Configures Nginx to redirect /redirect_me to https://www.youtube.com/watch?v=QH2-TGUlwu4 with 301

# Update package list and install nginx if not present
apt-get update -y
apt-get install -y nginx

# Ensure default Nginx site config exists
CONFIG_FILE="/etc/nginx/sites-available/default"

# Use sed to add redirect inside the server block
sed -i '/server_name _;/a \\n\tlocation /redirect_me {\n\t\treturn 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;\n\t}' $CONFIG_FILE

# Test Nginx configuration
nginx -t

# Reload Nginx to apply changes
systemctl restart nginx
